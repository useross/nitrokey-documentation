<!DOCTYPE html>
<html lang="English">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>System update | Nitrokey Documentation</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="User documentation of all Nitrokey products">
    <link rel="preload" href="/assets/css/17.styles.11dcf1c8.css" as="style"><link rel="preload" href="/assets/js/app.98766f10.js" as="script"><link rel="preload" href="/assets/js/38.2f1dfbd9.js" as="script"><link rel="preload" href="/assets/js/26.b0851b41.js" as="script"><link rel="prefetch" href="/assets/js/0.c6945a0c.js"><link rel="prefetch" href="/assets/js/1.effed01e.js"><link rel="prefetch" href="/assets/js/10.9c6cd269.js"><link rel="prefetch" href="/assets/js/11.13b7858f.js"><link rel="prefetch" href="/assets/js/12.01fbd34e.js"><link rel="prefetch" href="/assets/js/13.3662044e.js"><link rel="prefetch" href="/assets/js/14.42e4dfcf.js"><link rel="prefetch" href="/assets/js/15.bebaaf89.js"><link rel="prefetch" href="/assets/js/16.476453a2.js"><link rel="prefetch" href="/assets/js/18.90a9128d.js"><link rel="prefetch" href="/assets/js/19.544aa3a9.js"><link rel="prefetch" href="/assets/js/2.a23ac21d.js"><link rel="prefetch" href="/assets/js/20.2755c05c.js"><link rel="prefetch" href="/assets/js/21.abaac5c1.js"><link rel="prefetch" href="/assets/js/22.463d93f1.js"><link rel="prefetch" href="/assets/js/23.366d6e0f.js"><link rel="prefetch" href="/assets/js/24.75dc5750.js"><link rel="prefetch" href="/assets/js/25.762b2e0b.js"><link rel="prefetch" href="/assets/js/27.8962b34a.js"><link rel="prefetch" href="/assets/js/28.be593771.js"><link rel="prefetch" href="/assets/js/29.cc9aed69.js"><link rel="prefetch" href="/assets/js/3.52eef044.js"><link rel="prefetch" href="/assets/js/30.c77476e5.js"><link rel="prefetch" href="/assets/js/31.822a307e.js"><link rel="prefetch" href="/assets/js/32.761588cb.js"><link rel="prefetch" href="/assets/js/33.34023807.js"><link rel="prefetch" href="/assets/js/34.db1c5872.js"><link rel="prefetch" href="/assets/js/35.bc9eb4ba.js"><link rel="prefetch" href="/assets/js/36.4ff37fe5.js"><link rel="prefetch" href="/assets/js/39.5a8d0743.js"><link rel="prefetch" href="/assets/js/4.f5d5fb45.js"><link rel="prefetch" href="/assets/js/40.84b6023b.js"><link rel="prefetch" href="/assets/js/41.b0ee963f.js"><link rel="prefetch" href="/assets/js/42.90d49f16.js"><link rel="prefetch" href="/assets/js/43.d111403b.js"><link rel="prefetch" href="/assets/js/44.f837f138.js"><link rel="prefetch" href="/assets/js/45.998830bd.js"><link rel="prefetch" href="/assets/js/46.fa62f12b.js"><link rel="prefetch" href="/assets/js/47.8eb6f96e.js"><link rel="prefetch" href="/assets/js/48.29022358.js"><link rel="prefetch" href="/assets/js/49.89b1b46f.js"><link rel="prefetch" href="/assets/js/5.203768b7.js"><link rel="prefetch" href="/assets/js/50.cc4523c5.js"><link rel="prefetch" href="/assets/js/51.6068a12e.js"><link rel="prefetch" href="/assets/js/52.fad38e5b.js"><link rel="prefetch" href="/assets/js/53.8e128b62.js"><link rel="prefetch" href="/assets/js/54.6d5f558a.js"><link rel="prefetch" href="/assets/js/55.dfafdfc1.js"><link rel="prefetch" href="/assets/js/56.e1550bff.js"><link rel="prefetch" href="/assets/js/57.637c9993.js"><link rel="prefetch" href="/assets/js/58.64f8d482.js"><link rel="prefetch" href="/assets/js/59.36752022.js"><link rel="prefetch" href="/assets/js/6.ea32a1a0.js"><link rel="prefetch" href="/assets/js/60.40e65c4f.js"><link rel="prefetch" href="/assets/js/61.f745c7cf.js"><link rel="prefetch" href="/assets/js/62.cf67f7eb.js"><link rel="prefetch" href="/assets/js/63.1b6f1928.js"><link rel="prefetch" href="/assets/js/64.079fc9a4.js"><link rel="prefetch" href="/assets/js/65.1e26d021.js"><link rel="prefetch" href="/assets/js/66.211e9457.js"><link rel="prefetch" href="/assets/js/67.c5229aaa.js"><link rel="prefetch" href="/assets/js/68.706b8e9f.js"><link rel="prefetch" href="/assets/js/69.a4422ea6.js"><link rel="prefetch" href="/assets/js/7.ec79c1c1.js"><link rel="prefetch" href="/assets/js/70.039dc1c3.js"><link rel="prefetch" href="/assets/js/71.1086f9b4.js"><link rel="prefetch" href="/assets/js/72.6d51d39c.js"><link rel="prefetch" href="/assets/js/73.53bd5d15.js"><link rel="prefetch" href="/assets/js/74.5882d54f.js"><link rel="prefetch" href="/assets/js/75.f78eda2d.js"><link rel="prefetch" href="/assets/js/76.6d452f95.js"><link rel="prefetch" href="/assets/js/77.3ec47805.js"><link rel="prefetch" href="/assets/js/78.2723fdca.js"><link rel="prefetch" href="/assets/js/79.d9a5932a.js"><link rel="prefetch" href="/assets/js/8.f7ace3b0.js"><link rel="prefetch" href="/assets/js/80.ec0ab42e.js"><link rel="prefetch" href="/assets/js/81.40d0d643.js"><link rel="prefetch" href="/assets/js/82.80ee92f4.js"><link rel="prefetch" href="/assets/js/83.72bf5dca.js"><link rel="prefetch" href="/assets/js/84.886a3d39.js"><link rel="prefetch" href="/assets/js/85.d5c979cb.js"><link rel="prefetch" href="/assets/js/86.38315c59.js"><link rel="prefetch" href="/assets/js/9.f644abba.js">
    <link rel="stylesheet" href="/assets/css/17.styles.11dcf1c8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/nitrokey_logo_nur_schild_rot.svg" alt="Nitrokey Documentation" class="logo"> <span class="site-name can-hide">Nitrokey Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Product Menu" class="dropdown-title"><span class="title">Products</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fido2/" class="nav-link">
  Nitrokey FIDO2
</a></li><li class="dropdown-item"><!----> <a href="/u2f/" class="nav-link">
  Nitrokey FIDO U2F
</a></li><li class="dropdown-item"><!----> <a href="/hsm/" class="nav-link">
  Nitrokey HSM
</a></li><li class="dropdown-item"><!----> <a href="/pro/" class="nav-link">
  Nitrokey Pro
</a></li><li class="dropdown-item"><!----> <a href="/start/" class="nav-link">
  Nitrokey Start
</a></li><li class="dropdown-item"><!----> <a href="/storage/" class="nav-link">
  Nitrokey Storage
</a></li><li class="dropdown-item"><!----> <a href="/x230/" class="nav-link router-link-active">
  NitroPad X230
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/x230/qubes/system-update.html" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/de/" class="nav-link">
  Deutsch
</a></li></ul></div></div> <a href="https://github.com/Nitrokey/nitrokey-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Product Menu" class="dropdown-title"><span class="title">Products</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fido2/" class="nav-link">
  Nitrokey FIDO2
</a></li><li class="dropdown-item"><!----> <a href="/u2f/" class="nav-link">
  Nitrokey FIDO U2F
</a></li><li class="dropdown-item"><!----> <a href="/hsm/" class="nav-link">
  Nitrokey HSM
</a></li><li class="dropdown-item"><!----> <a href="/pro/" class="nav-link">
  Nitrokey Pro
</a></li><li class="dropdown-item"><!----> <a href="/start/" class="nav-link">
  Nitrokey Start
</a></li><li class="dropdown-item"><!----> <a href="/storage/" class="nav-link">
  Nitrokey Storage
</a></li><li class="dropdown-item"><!----> <a href="/x230/" class="nav-link router-link-active">
  NitroPad X230
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/x230/qubes/system-update.html" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/de/" class="nav-link">
  Deutsch
</a></li></ul></div></div> <a href="https://github.com/Nitrokey/nitrokey-documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/x230/qubes/" class="sidebar-link">NitroPad X230, Qubes OS</a></li><li><a href="/x230/qubes/verify-sealed-hardware.html" class="sidebar-link">Verify Sealed Hardware</a></li><li><a href="/x230/qubes/operating-system-reinstallation.html" class="sidebar-link">Operating System Reinstallation</a></li><li><a href="/x230/qubes/factory-reset.html" class="sidebar-link">Factory Reset</a></li><li><a href="/x230/qubes/firmware-update.html" class="sidebar-link">Firmware Update</a></li><li><a href="/x230/qubes/default-boot.html" class="sidebar-link">Default Boot</a></li><li><a href="/x230/qubes/system-update.html" class="active sidebar-link">System update</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/x230/qubes/system-update.html#procedure-after-a-system-update" class="sidebar-link">Procedure After a System Update</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="system-update"><a href="#system-update" class="header-anchor">#</a> System update</h1> <p>The NitroPad watches for changes to important system files to detect third-party tampering. This means that special steps are sometimes necessary when updating the system. This can often be recognized by the fact that the system prompts you to reboot.</p> <h2 id="procedure-after-a-system-update"><a href="#procedure-after-a-system-update" class="header-anchor">#</a> Procedure After a System Update</h2> <h3 id="boot-hash-mismatch"><a href="#boot-hash-mismatch" class="header-anchor">#</a> Boot Hash Mismatch</h3> <ol><li>If you restart the NitroPad after an update, the startup screen should initially appear as usual without an error message.</li></ol> <p><img src="/assets/img/1.a4b01423.jpeg" alt="img1"></p> <ol start="2"><li>If you press Enter afterwards, you will get an error message that looks like this or similar:</li></ol> <p><img src="/assets/img/2.ffdf13c2.jpeg" alt="img2"></p> <ol start="3"><li>Confirm the message with Enter to have the files changed by the system update verified. Afterwards you will be asked again for a confirmation.</li></ol> <p><img src="/assets/img/3.eb274c18.jpeg" alt="img3"></p> <ol start="4"><li>Now insert the Nitrokey if this is not already the case and confirm with Enter. Then you must enter the User PIN of the Nitrokey (default: 123456). You will not see the characters you typed in on the screen.</li></ol> <p><strong>Important</strong>: Heads expects an English keyboard layout, on which e.g. &quot;y&quot; and &quot;z&quot; are swapped in comparison to the German keyboard layout. If you agree with the default selection (which is written in capital letter) you can also simply confirm by pressing Enter.</p> <div class="language- extra-class"><pre class="language-text"><code>Please confirm that your GPG card is inserted [Y/n]:
 
Verifying presence of GPG card...
 
XXXXXXX: XXXXXXXXXX
Please unlock the card
 
Number: XXXX XXXXXX
Holder: 
Counter: X
PIN: 
</code></pre></div><p>Now the NitroPad marks the files changed by the update as verified.</p> <h3 id="boot-entry-has-changed"><a href="#boot-entry-has-changed" class="header-anchor">#</a> Boot Entry Has Changed</h3> <ol start="5"><li>Next, either another error message appears or the operating system starts. This depends on the system update. If the following error message appears, proceeds as described below:</li></ol> <p><img src="/assets/img/4.89192f73.jpeg" alt="img4"></p> <ol start="6"><li>First confirm the error message shown above. Then we see a list of all possible boat entries - choose the first one by simply pressing Enter.</li></ol> <p><img src="/assets/img/5.e3ff469d.jpeg" alt="img5"></p> <ol start="7"><li>To save this value as default, select the option &quot;Make Ubuntu the default&quot; for Ubuntu or &quot;Make Qubes the default&quot; for Qubes OS in the next window.</li></ol> <p><img src="/assets/img/6.64358613.jpeg" alt="img6"></p> <ol start="8"><li><p>Now the Nitrokey has to be plugged in, if this is not yet the case. Confirm the next three questions with Enter and enter the User PIN of the Nitrokey if prompted (default: 123456).</p> <p><strong>Important</strong>: Heads expects an English keyboard layout, on which e.g. &quot;y&quot; and &quot;z&quot; are swapped in comparison to the German keyboard layout.</p></li></ol> <div class="language- extra-class"><pre class="language-text"><code>Saving a default will modify the disk. Proceed? [Y/n]:
 
Do you wish to add a disk encryption to the TPM [y/N]:
 
Please confirm that your GPG card is inserted [Y/n]:
 
Verifying presence of GPG card...
 
XXXXXXX: XXXXXXXXXX
Please unlock the card
 
Number: XXXX XXXXXX
Holder: 
Counter: X
PIN: 
</code></pre></div><p>Your system will then boot.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Nitrokey/nitrokey-documentation/edit/master/x230/qubes/system-update.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/10/2020, 9:25:09 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/x230/qubes/default-boot.html" class="prev">
        Default Boot
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.98766f10.js" defer></script><script src="/assets/js/38.2f1dfbd9.js" defer></script><script src="/assets/js/26.b0851b41.js" defer></script>
  </body>
</html>
